webpackJsonp([1],{EUTx:function(a,s,e){a.exports=e("F5cs")},F5cs:function(a,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=function(){var a=this,s=a.$createElement;a._self._c;return a._m(0)},r=[function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("section",[e("h2",{attrs:{id:"quan-xian"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#quan-xian","aria-hidden":"true"}},[a._v("¶")]),a._v(" 权限")]),a._v(" "),e("p",[a._v("程序为权限控制添加了菜单级别的权限和页面元素的权限，在该程序中权限称为 "),e("code",{pre:!0},[a._v("role")]),a._v(" 每个权限都有对应的资源 "),e("code",{pre:!0},[a._v("resource")]),a._v(" 所有权限控制实际是针对资源的控制。")]),a._v(" "),e("h3",{attrs:{id:"cai-dan-quan-xian"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cai-dan-quan-xian","aria-hidden":"true"}},[a._v("¶")]),a._v(" 菜单权限")]),a._v(" "),e("p",[a._v("在 "),e("code",{pre:!0},[a._v("./src/app/navigation.model.ts")]),a._v(" 中是程序的所有菜单配置，在配置中有一个属性是 "),e("code",{pre:!0},[a._v("resource")])]),a._v(" "),e("pre",{pre:!0},[e("code",{attrs:{class:"hljs language-json"}},[a._v("{\n    'title'   : '会员统计',\n    'type'    : 'group',\n    'icon'    : 'apps',\n    'children': [\n        {\n            'title': '会员列表',\n            'type' : 'item',\n            'icon' : 'today',\n            'url'  : '/apps/member',\n            'resource' : 'View_Member'\n        }\n    ]\n}\n")])]),a._v(" "),e("p",[e("code",{pre:!0},[a._v("resource")]),a._v(" 对应的就是权限的资源。")]),a._v(" "),e("div",{staticClass:"tip"},[e("p",[a._v("因为菜单控件是fuse模板的控件，所以在做菜单权限控制的时候需要修改原来的控件 "),e("br"),a._v("\n在 ./src/app/core/components/navigation 目录下对菜单控件进行改造来判断当前登录用户的权限资源。"),e("br"),a._v("\n通过对 navigation.service 修改，对用户资源和菜单资源进行比对，进行数据筛选，然后在 nav-collapse、nav-group、nav-item 控件中进行显示隐藏的控制。")])]),a._v(" "),e("h3",{attrs:{id:"yuan-su-quan-xian"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#yuan-su-quan-xian","aria-hidden":"true"}},[a._v("¶")]),a._v(" 元素权限")]),a._v(" "),e("p",[a._v("除了菜单权限控制显示隐藏，页面元素也要通过用户权限资源来控制显示隐藏，元素控制是通过 "),e("code",{pre:!0},[a._v("directive")]),a._v(" 控制的，./src/app/core/directives/resource/resource-action.directive.ts")]),a._v(" "),e("pre",{pre:!0},[e("code",{attrs:{class:"hljs language-javascript"}},[a._v("@Directive({ "),e("span",{attrs:{class:"hljs-attr"}},[a._v("selector")]),a._v(": "),e("span",{attrs:{class:"hljs-string"}},[a._v("'[resourceAction]'")]),a._v(" })\n")])]),a._v(" "),e("p",[a._v("在页面中使用时，要传入指定的 "),e("code",{pre:!0},[a._v("resource")]),a._v(" directive 会通过用户资源来判断该元素是否显示。")]),a._v(" "),e("pre",{pre:!0},[e("code",{attrs:{class:"hljs language-html"}},[e("span",{attrs:{class:"hljs-tag"}},[a._v("<"),e("span",{attrs:{class:"hljs-name"}},[a._v("button")]),a._v(" "),e("span",{attrs:{class:"hljs-attr"}},[a._v("md-raised-button")]),a._v(" "),e("span",{attrs:{class:"hljs-attr"}},[a._v("class")]),a._v("="),e("span",{attrs:{class:"hljs-string"}},[a._v('"submit-button"')]),a._v(" *"),e("span",{attrs:{class:"hljs-attr"}},[a._v("resourceAction")]),a._v("="),e("span",{attrs:{class:"hljs-string"}},[a._v("\"'View_Member_Add_Button'\"")]),a._v(">")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"tip"},[e("p",[a._v("指令传入的必须是字符串格式。")])])])}],n=e("XyMi"),c=null,v=!1,i=null,_=null,l=null,o=Object(n["a"])(c,t,r,v,i,_,l);s["default"]=o.exports}});
//# sourceMappingURL=1.3cd1b7ef.js.map