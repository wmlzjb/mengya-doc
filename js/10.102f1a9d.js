webpackJsonp([10],{VohN:function(s,a,t){s.exports=t("pBXu")},pBXu:function(s,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},n=[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("h2",{attrs:{id:"api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api","aria-hidden":"true"}},[s._v("¶")]),s._v(" API")]),s._v(" "),t("p",[s._v("API直接给客户端提供数据服务，基于Restful规范编写，一般分为Post、Put、Delete、Get几种，基本编写规范如下：")]),s._v(" "),t("div",{staticClass:"tip"},[t("p",[s._v("1 API都存放于"),t("strong",[s._v("Skyline.Web.Api")]),s._v("项目的"),t("strong",[s._v("Controllers")]),s._v("目录下"),t("br")]),s._v(" "),t("p",[s._v("3 "),t("strong",[s._v("Controllers")]),s._v("目录下的API如果属于公用场景，都放置于相应的"),t("strong",[s._v("Shared")]),s._v("目录中"),t("br")]),s._v(" "),t("p",[s._v("4 "),t("strong",[s._v("Controllers")]),s._v("目录下如果是独立场景的需要建立一个相应业务的文件夹，相关服务放置其中")]),s._v(" "),t("p",[s._v("5 数据服务一般都需要继承EntityController<数据服务, 实体, ViewModel, PostModel, PutModel>基类，基类中实现了绝大部分的方法:")]),s._v(" "),t("p",[s._v("6 API命名和实体字段命名尽量简洁，但是避免使用简称或者首字母缩写，控制在3个单词以内，遵照大驼峰命名规范，不允许使用复数，领域服务以Controller结尾")]),s._v(" "),t("p",[s._v("7 更多规范看下面的示例")])]),s._v(" "),t("p",[s._v("下面以会员数据服务示例和注释：")]),s._v(" "),t("pre",{pre:!0},[t("code",{attrs:{class:"hljs language-csharp"}},[t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("<summary>")])]),s._v("\n"),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" ")]),s._v("\n"),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</summary>")])]),s._v("\n["),t("span",{attrs:{class:"hljs-meta"}},[s._v("RoutePrefix("),t("span",{attrs:{class:"hljs-meta-string"}},[s._v('"api/members"')]),s._v(")")]),s._v("]\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"hljs-title"}},[s._v("MemberController")]),s._v(" : "),t("span",{attrs:{class:"hljs-title"}},[s._v("EntityController")]),s._v("<"),t("span",{attrs:{class:"hljs-title"}},[s._v("MemberDataService")]),s._v(", "),t("span",{attrs:{class:"hljs-title"}},[s._v("Member")]),s._v(", "),t("span",{attrs:{class:"hljs-title"}},[s._v("MemberViewModel")]),s._v(", "),t("span",{attrs:{class:"hljs-title"}},[s._v("MemberPostModel")]),s._v(", "),t("span",{attrs:{class:"hljs-title"}},[s._v("MemberPutModel")]),s._v(">\n{\n    "),t("span",{attrs:{class:"hljs-comment"}},[s._v("//构造函数注入需要的数据服务")]),s._v("\n    "),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"hljs-title"}},[s._v("MemberController")]),s._v("("),t("span",{attrs:{class:"hljs-params"}},[s._v("UserService userService, MemberDataService dataService")]),s._v(") : "),t("span",{attrs:{class:"hljs-title"}},[s._v("base")]),s._v("("),t("span",{attrs:{class:"hljs-params"}},[s._v("dataService, userService, "),t("span",{attrs:{class:"hljs-string"}},[s._v('"GetMember"')])]),s._v(")\n    ")]),s._v("{\n    }\n\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("<summary>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" 获取所有会员")]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</summary>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v('<param name="options">')]),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</param>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("<returns>")]),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</returns>")])]),s._v("\n    ["),t("span",{attrs:{class:"hljs-meta"}},[s._v("Route("),t("span",{attrs:{class:"hljs-meta-string"}},[s._v('""')]),s._v(")")]),s._v("]"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//路由")]),s._v("\n    ["),t("span",{attrs:{class:"hljs-meta"}},[s._v("ResponseType(typeof(PagedResult<MemberViewModel>))")]),s._v("]"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//返回值类型")]),s._v("\n    ["),t("span",{attrs:{class:"hljs-meta"}},[s._v("Resources("),t("span",{attrs:{class:"hljs-meta-string"}},[s._v('"View_Member"')]),s._v(")")]),s._v("]"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//资源Code")]),s._v("\n    "),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("override")]),s._v(" IHttpActionResult "),t("span",{attrs:{class:"hljs-title"}},[s._v("GetAll")]),s._v("("),t("span",{attrs:{class:"hljs-params"}},[s._v("ODataQueryOptions<Member> options")]),s._v(")"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//OData参数")]),s._v("\n    ")]),s._v("{\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("base")]),s._v(".GetAll(options);"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//调用基类提供的默认Get方法")]),s._v("\n    }\n\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("<summary>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v("  根据Id获取会员")]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</summary>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v('<param name="id">')]),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</param>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v('<param name="options">')]),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</param>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("<returns>")]),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</returns>")])]),s._v("\n    ["),t("span",{attrs:{class:"hljs-meta"}},[s._v("Route("),t("span",{attrs:{class:"hljs-meta-string"}},[s._v('"{id}"')]),s._v(", Name = "),t("span",{attrs:{class:"hljs-meta-string"}},[s._v('"GetMember"')]),s._v(")")]),s._v("]"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//路由")]),s._v("\n    ["),t("span",{attrs:{class:"hljs-meta"}},[s._v("ResponseType(typeof(MemberViewModel))")]),s._v("]"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//返回值类型")]),s._v("\n    ["),t("span",{attrs:{class:"hljs-meta"}},[s._v("Resources("),t("span",{attrs:{class:"hljs-meta-string"}},[s._v('"View_Member"')]),s._v(")")]),s._v("]"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//资源Code")]),s._v("\n    "),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("override")]),s._v(" IHttpActionResult "),t("span",{attrs:{class:"hljs-title"}},[s._v("Get")]),s._v("("),t("span",{attrs:{class:"hljs-params"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("string")]),s._v(" id, ODataQueryOptions<MemberViewModel> options")]),s._v(")\n    ")]),s._v("{\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("base")]),s._v(".Get(id, options);"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//调用基类提供的默认Get方法")]),s._v("\n    }\n\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("<summary>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" 创建会员")]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</summary>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v('<param name="model">')]),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</param>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("<returns>")]),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</returns>")])]),s._v("\n    ["),t("span",{attrs:{class:"hljs-meta"}},[s._v("Route("),t("span",{attrs:{class:"hljs-meta-string"}},[s._v('""')]),s._v(")")]),s._v("]"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//路由")]),s._v("\n    ["),t("span",{attrs:{class:"hljs-meta"}},[s._v("ResponseType(typeof(MemberViewModel))")]),s._v("]"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//返回值类型")]),s._v("\n    "),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("override")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("async")]),s._v(" Task<IHttpActionResult> "),t("span",{attrs:{class:"hljs-title"}},[s._v("Post")]),s._v("("),t("span",{attrs:{class:"hljs-params"}},[s._v("MemberPostModel model")]),s._v(")\n    ")]),s._v("{\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("base")]),s._v(".Post(model);"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//调用基类提供的默认Post方法")]),s._v("\n    }\n\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("<summary>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" 修改会员")]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</summary>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v('<param name="id">')]),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</param>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v('<param name="model">')]),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</param>")])]),s._v("\n    "),t("span",{attrs:{class:"hljs-comment"}},[t("span",{attrs:{class:"hljs-doctag"}},[s._v("///")]),s._v(" "),t("span",{attrs:{class:"hljs-doctag"}},[s._v("<returns>")]),t("span",{attrs:{class:"hljs-doctag"}},[s._v("</returns>")])]),s._v("\n    ["),t("span",{attrs:{class:"hljs-meta"}},[s._v("Route("),t("span",{attrs:{class:"hljs-meta-string"}},[s._v('"{id}"')]),s._v(")")]),s._v("]"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//路由")]),s._v("\n    ["),t("span",{attrs:{class:"hljs-meta"}},[s._v("ResponseType(typeof(MemberViewModel))")]),s._v("]"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//返回值类型")]),s._v("\n    "),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("override")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("async")]),s._v(" Task<IHttpActionResult> "),t("span",{attrs:{class:"hljs-title"}},[s._v("Put")]),s._v("("),t("span",{attrs:{class:"hljs-params"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("string")]),s._v(" id, MemberPutModel model")]),s._v(")\n    ")]),s._v("{\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" item = "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" _dataService.UpdateAsync(id, model, "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(", "),t("span",{attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(");"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//调用数据服务进行更新")]),s._v("\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" toReturn = Mapper.Map<MemberViewModel>(item);"),t("span",{attrs:{class:"hljs-comment"}},[s._v("//通过AutoMapper转换成ViewModel")]),s._v("\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" Ok(toReturn);\n    }\n")])]),s._v(" "),t("p",[s._v("其他示例之后将继续完善……")])])}],r=t("XyMi"),e=null,v=!1,_=null,c=null,p=null,o=Object(r["a"])(e,l,n,v,_,c,p);a["default"]=o.exports}});
//# sourceMappingURL=10.102f1a9d.js.map