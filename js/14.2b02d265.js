webpackJsonp([14],{"+9WB":function(v,_,t){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var s=function(){var v=this,_=v.$createElement;v._self._c;return v._m(0)},r=[function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("section",[t("h2",{attrs:{id:"shu-ju-ku-qian-yi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shu-ju-ku-qian-yi","aria-hidden":"true"}},[v._v("¶")]),v._v(" 数据库迁移")]),v._v(" "),t("p",[v._v("上述项目配置完成后，需要对项目所涉及的"),t("strong",[v._v("Skyline.CA")]),v._v("、"),t("strong",[v._v("Skyline.DB")]),v._v("两个数据库进行初始化，框架数据底层是基于EF 6.1.3的Code First模式，在建立好相应的实体之后，只需要执行一下迁移语句即可自动生成数据库和相关表结构，而项目运行所需的初始化数据，也通过编写代码的方式存放于"),t("strong",[v._v("Skyline.Businsess")]),v._v("项目中"),t("strong",[v._v("Migrations")]),v._v("目录下的"),t("strong",[v._v("Configuration.cs")]),v._v("文件中，执行迁移会自动将这些数据插入到数据库中。"),t("br")]),v._v(" "),t("p",[v._v("其中DB数据库迁移情况可能出现下列三种情况：")]),v._v(" "),t("div",{staticClass:"tip"},[t("p",[v._v("情况一"),t("br"),v._v("\nDB数据库如果是在没有数据库的情况下第一次执行迁移创建，请在"),t("strong",[v._v("Skyline.Web.CA")]),v._v("项目配置中间中将"),t("strong",[v._v("IsMigrations")]),v._v("配置改为true，并按下列步骤进行迁移。")])]),v._v(" "),t("div",{staticClass:"tip"},[t("p",[v._v("情况二"),t("br"),v._v("\nDB数据库如果是在有数据库的情况下希望删除重新执行迁移创建，请先手动删除现有DB数据库，并在"),t("strong",[v._v("Skyline.Web.CA")]),v._v("项目配置中间中将"),t("strong",[v._v("IsMigrations")]),v._v("配置改为true，并按下列步骤进行迁移。")])]),v._v(" "),t("div",{staticClass:"tip"},[t("p",[v._v("情况三"),t("br"),v._v("\nDB数据库如果是在有数据库的情况下"),t("strong",[v._v("增量")]),v._v("执行迁移创建，请在"),t("strong",[v._v("Skyline.Web.CA")]),v._v("项目配置中间中将"),t("strong",[v._v("IsMigrations")]),v._v("配置改为false，并按下列步骤进行迁移。"),t("br")])]),v._v(" "),t("h3",{attrs:{id:"ca-shu-ju-ku-de-qian-yi-bu-zou"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ca-shu-ju-ku-de-qian-yi-bu-zou","aria-hidden":"true"}},[v._v("¶")]),v._v(" CA数据库的迁移步骤")]),v._v(" "),t("div",{staticClass:"tip"},[t("p",[v._v("1 将"),t("strong",[v._v("Skyline.Web.CA")]),v._v("项目右键"),t("strong",[v._v("设为启动项目")]),t("br")]),v._v(" "),t("p",[v._v("2 在VS顶部菜单中依次选择"),t("strong",[v._v("工具")]),v._v(" / "),t("strong",[v._v("Nuget包管理器")]),v._v(" / "),t("strong",[v._v("程序包管理器控制台")]),t("br")]),v._v(" "),t("p",[v._v("3 在VS底部出现的"),t("strong",[v._v("程序包管理器控制台")]),v._v("中的"),t("strong",[v._v("默认项目")]),v._v("下拉框中选择"),t("strong",[v._v("Skyline.Web.CA")]),t("br")]),v._v(" "),t("p",[v._v("4 在控制台中按回车，等到出现"),t("strong",[v._v("PM>"),t("strong",[v._v("后，输入")]),v._v("Add-Migration MyInitCA")]),v._v("并按回车，其中"),t("strong",[v._v("MyInitCA")]),v._v("是代表本次迁移的名字，可以自定义输入自己想要的"),t("br")]),v._v(" "),t("p",[v._v("5 等待执行完成后，结果中也许会出现黄色的警告，可以忽视，同时会在"),t("strong",[v._v("Skyline.Web.CA")]),v._v("项目中"),t("strong",[v._v("Migrations")]),v._v("目录下创建一个"),t("strong",[v._v("时间+迁移名称的.cs")]),v._v("文件，里面就包含着本次迁移的脚本"),t("br")]),v._v(" "),t("p",[v._v("6 当出现这个文件后，再次在控制台的"),t("strong",[v._v("PM>"),t("strong",[v._v("后，输入")]),v._v("Update-Database")]),v._v("并按回车，这个指定代表着确认执行当前的迁移脚本，并同步到数据库，这个过程因为会插入初始化数据，所以需要的时间大概会有几分钟，直到再次出现"),t("strong",[v._v("PM>")]),v._v("，则代表迁移成功"),t("br")])]),v._v(" "),t("h3",{attrs:{id:"db-shu-ju-ku-de-qian-yi-bu-zou"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#db-shu-ju-ku-de-qian-yi-bu-zou","aria-hidden":"true"}},[v._v("¶")]),v._v(" DB数据库的迁移步骤")]),v._v(" "),t("div",{staticClass:"tip"},[t("p",[v._v("1 将"),t("strong",[v._v("Skyline.Web.CA")]),v._v("项目右键"),t("strong",[v._v("设为启动项目")]),t("br")]),v._v(" "),t("p",[v._v("2 在VS顶部菜单中依次选择"),t("strong",[v._v("工具")]),v._v(" / "),t("strong",[v._v("Nuget包管理器")]),v._v(" / "),t("strong",[v._v("程序包管理器控制台")]),t("br")]),v._v(" "),t("p",[v._v("3 在VS底部出现的"),t("strong",[v._v("程序包管理器控制台")]),v._v("中的"),t("strong",[v._v("默认项目")]),v._v("下拉框中选择"),t("strong",[v._v("Skyline.Businsess")]),t("br")]),v._v(" "),t("p",[v._v("4 在控制台中按回车，等到出现"),t("strong",[v._v("PM>"),t("strong",[v._v("后，输入")]),v._v("Add-Migration MyInitDB")]),v._v("并按回车，其中"),t("strong",[v._v("MyInitDB")]),v._v("是代表本次迁移的名字，可以自定义输入自己想要的"),t("br")]),v._v(" "),t("p",[v._v("5 等待执行完成后，结果中也许会出现黄色的警告，可以忽视，同时会在"),t("strong",[v._v("Skyline.Web.Businsess")]),v._v("项目中"),t("strong",[v._v("Migrations")]),v._v("目录下创建一个"),t("strong",[v._v("时间+迁移名称的.cs")]),v._v("文件，里面就包含着本次迁移的脚本"),t("br")]),v._v(" "),t("p",[v._v("6 当出现这个文件后，再次在控制台的"),t("strong",[v._v("PM>"),t("strong",[v._v("后，输入")]),v._v("Update-Database")]),v._v("并按回车，这个指定代表着确认执行当前的迁移脚本，并同步到数据库，这个过程因为会插入初始化数据，所以需要的时间大概会有几分钟，直到再次出现"),t("strong",[v._v("PM>")]),v._v("，则代表迁移成功"),t("br")])]),v._v(" "),t("div",{staticClass:"tip"},[t("p",[v._v("PS. 两个数据库的迁移可以分别、单独执行，但是项目第一次运行或者删库重来的情况下，请遵照先CA后DB的顺序执行迁移。")])])])}],n=t("XyMi"),i=null,e=!1,a=null,o=null,g=null,u=Object(n["a"])(i,s,r,e,a,o,g);_["default"]=u.exports},"8BkW":function(v,_,t){v.exports=t("+9WB")}});
//# sourceMappingURL=14.2b02d265.js.map